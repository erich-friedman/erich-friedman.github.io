<!doctype html public "-//IETF//DTD HTML//EN"><HTML><HEAD><TITLE>Math Magic</TITLE></HEAD><BODY background="formulas.gif"><font size=+1><CENTER><H1> Problem of the Month (November 2000)</H1></CENTER>The game of NIM is well known.  The game is played with piles of counters.  The two players take turns removing any number of counters from any one pile.  The player who last takes a counter wins.<p>The strategy of NIM is not as well known.  Express each pile in base 2, and add these piles <b>without carrying</b>.  You can win if you can leave a position whose nim sum is 0.  For example, if it is your turn to play from piles of 5, 6, and 7, you can take 4 from any pile and win since:<p><center><pre>   1     101     101 110      10     110+111    +111    + 11 ---     ---     --- 000     000     000</pre></center><p>This month we explore some variants of NIM.  For each game, what are some winning positions?  Can you classify all winning positions?  Can you give a winning strategy? <p><font size=+2><b>End NIM:</b></font> The piles of counters are in a line, and players must take counters from one of the two piles on the ends.<p><font size=+2><b>Adjacent NIM:</b></font> The piles of counters are in a line, and players must take counters from a pile adjacent to the pile just taken from.<p><font size=+2><b>Veto NIM:</b></font> Each turn, your opponent can veto one of your proposed moves.<p><font size=+2><b>Double NIM:</b></font> Each turn, you must take counters from two different piles.<p><font size=+2><b>Large NIM:</b></font> Each turn, you must take counters from the largest pile.<p><font size=+2><b>Small NIM:</b></font> Each turn, you must take counters from the smallest pile.<p>What are some other interesting NIM variants?

<P><hr><p><center><h1>ANSWERS</h1></center>We will follow <i>Winning Ways</i> (Berlekamp, Conway, Guy) and call winning positions <i>P</i> positions (since the Previous player wins), and call losing positions <i>N</i> positions (since the Next player wins).  To classify <i>P</i> and <i>N</i> positions, note that every move from each <i>P</i> position must be to an <i>N</i> position, and there must exist some move from each <i>N</i> position to a <i>P</i> position.<p><font size=+2><b>End NIM:</b></font><p>Trevor Green  and Philippe Fondanaiche found these <i>P</i> positions:<p>
<ul><li>a, a</li><li>a, b, a (with a&ne;b)</li><li>a, b, b, a</li><li>a, b, c, a (with a&lt;b&lt;c or b&lt;c&lt;a)</li><li>a, b, c, a+1 (with b&le;a&lt;c)</li></ul><p>Trevor Green claims that it is easy to determine whether a position is <i>P</i> or <i>N</i> inductively.  Almost all the cases are handled by these rules:<p>If L, . . . , R is a <i>P</i> position, then so is a, L, . . . , R, a.<p>If L, . . . , R is an <i>N</i> position and L&le;R, then a, L, . . . , R, a is a <i>P</i> position if a&lt;L or a&gt;R, and a, L, . . . , R, a+1 is a <i>P</i> position if L&lt;a&lt;R&ndash;1.<p>Claudio Baiocchi proved that in any <i>P</i> position, the piles on the ends differ by at most one counter.  His proof: Let L be the left pile and R&lt;L&ndash;1 be the right pile, with [L,X,R] being a <i>P</i> position.  Then, for any 1&le;L'&lt;L, the position [L',X,R] is an <i>N</i> position. Thus, for any L' there exists a unique R'&lt;R such that [L',X,R'] is a <i>P</i> position. since the same R' can not be effective for two L', the assumption R&lt;L&ndash;1 brings to a contradiction. <p><font size=+2><b>Adjacent NIM:</b></font><p>Philippe Fondanaiche found these <i>P</i> positions:<p><ul><li>a, a</li><li>a, a+b, b</li></ul><p>He suggests that a good strategy for a more general position is to choose your first move in the odd numbered or even numbered piles, whichever are more numerous, therefore giving you more options later on.<p><font size=+2><b>Veto NIM:</b></font><p>These are some <i>P</i> positions I have found:<p><ul><li>a (with  a&le;1)</li><li>a, a+1</li><li>a, a, a</li><li>a, b, a+b+1</li></ul><p>Claudio Baiocchi points out and proves that given any position, there are exactly two values of another pile which we can add to it to make a <i>P</i> position.<p><font size=+2><b>Double NIM:</b></font><p>Trevor Green found the following winning positions:<p><ul><li>a</li><li>a, a, a, b (with b&ge;a&ge;1)</li><li>1, a, a, a, a (with a&ge;1)</li><li>1, a, a+1, a+1, b (with a even and b&ge;a+1)</li><li>2, a, a, a, a (with a even)</li><li>2, a, a+1, a+1, a+1 (with a = 0 or 1 (mod 4), and b&ge;a+2)</li><li>2, a, a+2, a+2, b (with a = 0 or 1 (mod 4), and b&ge;a+2)</li></ul><p>Philippe Fondanaiche found the <i>P</i> positions with 4 or fewer piles.<p><font size=+2><b>Large NIM:</b></font><p>Trevor Green and Claudio Baiocchi found that the <i>P</i> positions in this game are those that have an even number of largest piles.  The proof is simple: First note that from each <i>P</i> position, every legal move results in an <i>N</i> position, since you are decreasing the number of largest piles by 1.   Secondly, note that from every <i>N</i> position has a move to a <i>P</i> position.  Every such move works when there is more than 1 largest pile.  When there is only 1 largest pile, say the second largest pile is n piles of k.  You can either make the largest pile k (when n is odd), or remove the largest pile altogether (when n is even), and either move results in an even number of new largest piles.<p>Philippe Fondanaiche found the <i>P</i> positions with 3 or fewer piles.<p><font size=+2><b>Small NIM:</b></font><p>Trevor Green, Claudio Baiocchi, and Philippe Fondanaiche found that the <i>P</i> positions in this game are those containing an odd number of piles containing 1 counter.  The proof is again simple: From each <i>P</i> position, you can only take a pile of 1, resulting in an <i>N</i> position.  From each <i>N</i> position there is some move to a <i>P</i> position.  Those with 2 or more piles of 1 can move to one less pile of 1 counter.  Those with no piles if 1 can reduce the smallest pile to a pile of 1.<p><font size=+2><b>Cyclic NIM:</b></font><p>This NIM variant was suggested by Trevor Green.  This is the NIM game where the piles are linearly ordered, you can only take counters from the first pile, and the remains of that first pile are placed at the end.  The <i>P</i> positions found so far are:<p><ul><li>a, b (with a&le;b)</li><li>1, a, b (with a&gt;b)</li><li>a, b, 1 (with b&gt;1)</li><li>1, 1, a, b (with a&le;b)</li><li>a, 1, 1, b (with a&le;b)</li><li>a, b, 1, 1 (with a&le;b)</li><li>1, a, b, c (with a&gt;1 and c&gt;1)</li><li>2, a, b, c (with a&gt;1 and c&gt;1)</li></ul><p><font size=+2><b>Last NIM:</b></font><p>This NIM variant was suggested by Claudio Baiocchi.  This is the NIM game where you must take counters from the last pile of counters if that pile still exists.  The <i>P</i> positions are exactly those in Small Nim, those containing an odd number of piles containing 1 counter.<p><font size=+2><b>Non-Last NIM:</b></font><p>This NIM variant was also suggested by Claudio Baiocchi.  This is the NIM game where you cannot take counters from the previous pile touched.  The <i>P</i> positions known are:<p><ul><li>a, a</li></ul><p><font size=+2><b>Misere NIM:</b></font><p>This NIM variant was suggested by Philippe Fondanaiche.  This is the NIM game where the player who takes the last counter LOSES.  The <i>P</i> positions are exactly those in Nim, except that an odd number of piles of 1 counter is a <i>P</i> position, and an even number of piles of 1 counter is an <i>N</i> position.<p><font size=+2><b>Bounded NIM:</b></font><p>This NIM variant was also suggested by Philippe Fondanaiche.  This is the NIM game where the players cannot take more than N counters from a pile.  To determine whether a position is <i>P</i> or <i>N</i>, find the remainder of each pile upon division by N+1, and add these in base 2 without carrying.  If the result is 0, it is a <i>P</i> position.<p><font size=+2><b>Fibonacci NIM:</b></font><p>This NIM variant was also suggested by Philippe Fondanaiche.  This is the NIM game played with one pile where the players cannot take more than twice the amount of counters taken by the previous player.  The first player must take either 1 or 2 counters.  <p>Claudio Baiocchi told me how to classify a pile of n counters as <i>P</i> or <i>N</i>.  Start with n, and subtract off the biggest Fibonacci number possible.  repeat this until you get zero.  The position is <i>N</i> if the last number subtracted is 1 or 2, and <i>P</i> otherwise.<p>

<font size=+2><b>Specker's NIM:</b></font><p>

This NIM variant was suggested by Panayiotis.  This is the NIM game in which you must pick two piles of sizes A&le;B, remove some counters from A, and add some counters to B.<p>

He proves that the game always ends, but can last arbitrarily long if the players don't care about winning.  He finds the <i>P</i> positions with 5 or fewer piles are those containing an odd number of piles, where all but the largest pile are in pairs.<p>

<font size=+2><b>Sorted NIM:</b></font><p>
This Nim variant was suggested by Krzysztof Solyga.  The piles are arranged from left to right, and each pile must contain at least as many counters as the pile to its left.<p>

Zsb&aacute;n Ambrus mentioned the book by "Diszkr&eacute;t Matematikai J&aacute;t&eacute;kok", Polygon, Szeged, 1998 by Cs&aacute;k&aacute;ny B&eacute;la, which covers Nim and some variants.<p>
<HR><p>If you can extend any of these results, please <a href="mailto:erichfriedman68@gmail.com">e-mail</a> me.  Click <a href="https://erich-friedman.github.io/mathmagic/">here</a> to go back to Math Magic.  <font size=-1>Last updated 11/17/08.<font></BODY></HTML>